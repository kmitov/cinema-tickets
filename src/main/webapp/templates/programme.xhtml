<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    template="/templates/globalTemplate.xhtml"
>

<ui:define name="content" >

    <h:outputStylesheet name="css/styles_programme.css" />
    <h:outputStylesheet name="css/addProjections.css" />

    <f:event listener="#{programmeBean.refreshOnLoad}" type="postAddToView" />

    <div  style="background-color: black; width:100%;" >
        <div id="content" >

            <div id="table">
                <div id="program-header">
                    <div class="program-header-item">
                        <span class="white-text" >Date</span>
                    </div>
                    <div class="program-header-item">
                        <span class="white-text" >Duration</span>
                    </div>
                    <div class="program-header-item-movie">
                        <span class="white-text" >Movie</span>
                    </div>
                    <div class="program-header-item">
                        <span class="white-text" >Tickets</span>
                    </div>
                </div>

                <ui:repeat var="item" value="#{programmeBean.movieProjections}" >
                    <div>
                        <div class="program-header-item">
                            <h:outputText styleClass="white-text" value="#{item.date}" />
                        </div>
                        <div class="program-header-item">
                            <h:outputText styleClass="white-text" value="#{item.duration}" />
                        </div>
                        <div class="program-header-item-movie">
                            <h:link value="#{item.movieTitle}" styleClass="buy-ticket-link" outcome="/templates/singleMovie.jsf">
                                <f:param name="movieID" value="#{item.movieId}"></f:param>
                            </h:link>
                        </div>
                        <div class="program-header-item">
                            <h:link value="Buy Tickets" styleClass="buy-ticket-link" outcome="/templates/theatre.jsf">
                                <f:param name="projectionId" value="#{item.projectionId}"></f:param>
                                <f:param name="theatreId" value="#{item.theatreId}"></f:param>
                                <f:param name="userId" value="#{userBean.loggedInUser.id}"></f:param>
                            </h:link>
                        </div>
                    </div>
                </ui:repeat>

            </div>
        </div>
    </div>
</ui:define>
</ui:composition>

